function validateContactForm(e){let t=!0;const r=document.getElementById("contact-form");clearFormErrors(r);["name","email","service","message"].forEach(n=>{const a=e.get(n),o=r.querySelector(`[name="${n}"]`);a&&""!==a.trim()||(showFieldError(o,`${n.charAt(0).toUpperCase()+n.slice(1)} is required`),t=!1)});const n=e.get("email");if(n&&!isValidEmail(n)){showFieldError(r.querySelector('[name="email"]'),"Please enter a valid email address"),t=!1}const a=e.get("phone");if(a&&!isValidPhone(a)){showFieldError(r.querySelector('[name="phone"]'),"Please enter a valid phone number"),t=!1}return t}function validateField(e){const t=e.value.trim(),r=e.name;clearFieldError(e);const n={name:{required:!0,minLength:2,maxLength:100,pattern:/^[a-zA-Z\s\.]+$/,message:"Name must be 2-100 characters and contain only letters, spaces, and dots"},email:{required:!0,pattern:/^\S+@\S+\.\S+$/,message:"Please enter a valid email address"},phone:{pattern:/^[\+]?[0-9\s\-\(\)]{7,20}$/,message:"Please enter a valid phone number"},service:{required:!0,message:"Please select a service"},message:{required:!0,minLength:10,maxLength:2e3,message:"Message must be between 10 and 2000 characters"}}[r];return!n||(n.required&&!t?(showFieldError(e,`${r.charAt(0).toUpperCase()+r.slice(1)} is required`),!1):t&&n.minLength&&t.length<n.minLength||t&&n.maxLength&&t.length>n.maxLength?(showFieldError(e,n.message),!1):!(t&&n.pattern&&!n.pattern.test(t))||(showFieldError(e,n.message),!1))}function isValidEmail(e){return/^\S+@\S+\.\S+$/.test(e)}function isValidPhone(e){return/^[\+]?[0-9\s\-\(\)]{7,20}$/.test(e)}function clearFormErrors(e){e.querySelectorAll(".error-message").forEach(e=>e.remove());e.querySelectorAll(".is-invalid").forEach(e=>e.classList.remove("is-invalid"))}function clearFieldError(e){e.classList.remove("is-invalid");const t=e.parentNode.querySelector(".error-message");t&&t.remove()}function showFieldError(e,t){e.classList.add("is-invalid");const r=document.createElement("div");r.className="error-message",r.textContent=t,e.parentNode.appendChild(r)}function showNotification(e,t){const r=document.createElement("div");r.className=`notification ${e}`,r.textContent=t,document.body.appendChild(r),setTimeout(()=>{r.classList.add("fade-out"),setTimeout(()=>{r.remove()},500)},5e3)}document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("contact-form");if(e){e.addEventListener("submit",function(t){t.preventDefault();const r=new FormData(e);if(!validateContactForm(r))return!1;const n=e.querySelector('button[type="submit"]'),a=n.innerHTML;n.disabled=!0,n.querySelector("span").textContent="Sending...";const o={};r.forEach((e,t)=>{o[t]=e});const s="localhost"===window.location.hostname?"http://localhost:3000":window.location.origin;fetch(`${s}/api/contact`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}).then(e=>{if(!e.ok)throw new Error("Server returned "+e.status);return e.text().then(e=>e?JSON.parse(e):{})}).then(t=>{e.reset(),showSuccessModal(),n.disabled=!1,n.innerHTML=a}).catch(e=>{console.error("Error submitting form:",e),showNotification("error","Failed to send message. Please try again later."),n.disabled=!1,n.innerHTML=a})});e.querySelectorAll("input, textarea, select").forEach(e=>{e.addEventListener("blur",function(){validateField(e)})})}});