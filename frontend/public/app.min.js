class AnimationController{constructor(){this.observers=new Map,this.animatedElements=new Set,this.isReducedMotion=window.matchMedia("(prefers-reduced-motion: reduce)").matches,this.initAnimationSystem()}initAnimationSystem(){this.setupIntersectionObserver(),this.setupScrollAnimations(),this.setupHoverEffects(),this.setupParallaxEffects(),this.initCounterAnimations()}setupIntersectionObserver(){this.mainObserver=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&this.triggerAnimation(e.target,e.intersectionRatio)})},{threshold:[.1,.3,.5],rootMargin:"0px 0px -50px 0px"}),this.observeElements()}observeElements(){[".fade-in",".slide-up",".slide-down",".slide-left",".slide-right",".scale-up",".bounce-in",".rotate-in",".service-card",".project-card",".owner-info",".achievement",".expertise-card",".value-card",".job-card",".benefit-item",".section-title",".section-subtitle",".about-hero-card",".stagger-children > *"].forEach(e=>{document.querySelectorAll(e).forEach(e=>{this.animatedElements.has(e)||(this.mainObserver.observe(e),this.animatedElements.add(e))})})}triggerAnimation(e,t){if(this.isReducedMotion)return e.style.opacity="1",void(e.style.transform="none");e.classList.add("animate"),e.classList.contains("stagger-children")&&this.triggerStaggeredAnimation(e),e.classList.contains("counter-animate")&&this.animateCounter(e),t>.5&&e.classList.add("fully-visible"),this.mainObserver.unobserve(e)}triggerStaggeredAnimation(e){const t=Array.from(e.children),s=e.classList.contains("stagger-fast")?50:e.classList.contains("stagger-slow")?200:100;t.forEach((e,t)=>{setTimeout(()=>{e.classList.add("animate")},t*s)})}setupScrollAnimations(){let e=!1;window.addEventListener("scroll",()=>{e||(requestAnimationFrame(()=>{this.handleScroll(),e=!1}),e=!0)})}handleScroll(){const e=window.pageYOffset;this.updateParallax(e),this.updateNavbar(e),this.updateScrollProgress(e)}updateParallax(e){document.querySelectorAll(".parallax").forEach(t=>{const s=t.dataset.speed||.5,r=-e*s;t.style.transform=`translateY(${r}px)`})}updateNavbar(e){const t=document.getElementById("navbar");t&&(e>100?t.classList.add("scrolled"):t.classList.remove("scrolled"))}updateScrollProgress(e){const t=window.innerHeight,s=e/(document.documentElement.scrollHeight-t)*100,r=document.querySelector(".scroll-progress");r&&(r.style.width=`${s}%`)}setupHoverEffects(){document.querySelectorAll(".service-card, .project-card, .job-card, .benefit-item").forEach(e=>{e.addEventListener("mouseenter",e=>this.handleCardHover(e,!0)),e.addEventListener("mouseleave",e=>this.handleCardHover(e,!1))});document.querySelectorAll(".btn-enhanced").forEach(e=>{e.addEventListener("mouseenter",e=>this.handleButtonHover(e,!0)),e.addEventListener("mouseleave",e=>this.handleButtonHover(e,!1))})}handleCardHover(e,t){const s=e.currentTarget;t?(s.style.transform="translateY(-8px) scale(1.02)",s.style.boxShadow="0 25px 50px -12px rgba(0, 0, 0, 0.4)",(s.classList.contains("service-card")||s.classList.contains("project-card"))&&(s.style.borderColor="rgba(37, 99, 235, 0.5)")):(s.style.transform="",s.style.boxShadow="",s.style.borderColor="")}handleButtonHover(e,t){const s=e.currentTarget,r=s.querySelector(".btn-glow");t?(s.style.transform="translateY(-2px)",r&&(r.style.opacity="0.7")):(s.style.transform="",r&&(r.style.opacity="0"))}setupParallaxEffects(){document.querySelectorAll(".hero-background, .hero-particles").forEach(e=>{e.classList.add("parallax"),e.dataset.speed=e.classList.contains("hero-particles")?"0.3":"0.5"})}initCounterAnimations(){document.querySelectorAll(".stat-number, .achievement-number").forEach(e=>{e.classList.add("counter-animate")})}animateCounter(e){const t=parseInt(e.textContent.replace(/[^\d]/g,""));if(isNaN(t))return;const s=t/125;let r=0;const o=e.textContent,n=o.match(/^[^\d]*/)?.[0]||"",i=o.match(/[^\d]*$/)?.[0]||"",a=()=>{r+=s,r<t?(e.textContent=n+Math.floor(r)+i,requestAnimationFrame(a)):e.textContent=o};a()}}class UIController{constructor(){this.activeModal=null,this.mobileMenuOpen=!1,this.initUI()}initUI(){this.setupNavigation(),this.setupModals(),this.setupForms(),this.setupScrollEffects(),this.setupKeyboardNavigation()}setupNavigation(){const e=document.getElementById("nav-toggle"),t=document.querySelector(".nav-menu"),s=document.querySelectorAll(".nav-link");e&&t&&e.addEventListener("click",()=>{this.toggleMobileMenu()}),s.forEach(e=>{e.addEventListener("click",t=>{t.preventDefault(),this.handleNavClick(e)})}),window.addEventListener("scroll",()=>{this.updateActiveNav()})}toggleMobileMenu(){const e=document.querySelector(".nav-menu"),t=document.getElementById("nav-toggle");this.mobileMenuOpen=!this.mobileMenuOpen,this.mobileMenuOpen?(e.classList.add("active"),t.classList.add("active"),document.body.style.overflow="hidden"):(e.classList.remove("active"),t.classList.remove("active"),document.body.style.overflow="")}handleNavClick(e){const t=e.getAttribute("href"),s=document.querySelector(t);if(s){const e=s.offsetTop-80;window.scrollTo({top:e,behavior:"smooth"}),this.mobileMenuOpen&&this.toggleMobileMenu()}}updateActiveNav(){const e=document.querySelectorAll("section[id]"),t=document.querySelectorAll(".nav-link");let s="";e.forEach(e=>{const t=e.offsetTop-150,r=e.offsetHeight;window.scrollY>=t&&window.scrollY<t+r&&(s=e.getAttribute("id"))}),t.forEach(e=>{e.classList.remove("active"),e.getAttribute("href")===`#${s}`&&e.classList.add("active")})}setupModals(){const e=document.getElementById("success-modal");e&&e.addEventListener("click",t=>{t.target===e&&this.closeModal()}),document.addEventListener("keydown",e=>{"Escape"===e.key&&this.activeModal&&this.closeModal()})}showModal(e="success-modal"){const t=document.getElementById(e);if(t){t.style.display="flex",t.classList.add("fade-in"),this.activeModal=t,document.body.style.overflow="hidden";const e=t.querySelector('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');e&&e.focus()}}closeModal(){this.activeModal&&(this.activeModal.style.display="none",this.activeModal.classList.remove("fade-in"),this.activeModal=null,document.body.style.overflow="")}setupForms(){document.querySelectorAll("form").forEach(e=>{e.addEventListener("submit",e=>this.handleFormSubmit(e));e.querySelectorAll("input, select, textarea").forEach(e=>{e.addEventListener("blur",e=>this.validateField(e.target)),e.addEventListener("input",e=>this.clearFieldError(e.target))})})}async handleFormSubmit(e){e.preventDefault();const t=e.target,s=new FormData(t),r=t.querySelector('button[type="submit"]');if(this.setButtonLoading(r,!0),this.validateForm(t))try{const e=await this.submitForm(s);if(!e.success)throw new Error(e.message||"Failed to send message");this.showModal(),t.reset(),this.showNotification("Message sent successfully!","success")}catch(e){this.showNotification("Failed to send message. Please try again.","error")}finally{this.setButtonLoading(r,!1)}else this.setButtonLoading(r,!1)}async submitForm(e){const t="localhost"===window.location.hostname?"http://localhost:3000":window.location.origin,s={name:e.get("name")?.trim(),email:e.get("email")?.trim(),phone:e.get("phone")?.trim()||"",service:e.get("service"),message:e.get("message")?.trim()},r=await fetch(`${t}/api/contact`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});return await r.json()}validateForm(e){let t=!0;return e.querySelectorAll("[required]").forEach(e=>{this.validateField(e)||(t=!1)}),t}validateField(e){const t=e.value.trim(),s=e.type,r=e.name;return this.clearFieldError(e),e.hasAttribute("required")&&!t?(this.showFieldError(e,`${this.getFieldLabel(e)} is required`),!1):"email"===s&&t&&!this.isValidEmail(t)?(this.showFieldError(e,"Please enter a valid email address"),!1):!("phone"===r&&t&&!this.isValidPhone(t))||(this.showFieldError(e,"Please enter a valid phone number"),!1)}getFieldLabel(e){const t=e.closest(".form-group")?.querySelector("label");return t?t.textContent.replace("*","").trim():e.name}isValidEmail(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}isValidPhone(e){return/^[\+]?[1-9][\d]{0,15}$/.test(e.replace(/\s/g,""))}showFieldError(e,t){const s=e.closest(".form-group");if(s){s.classList.add("error");let e=s.querySelector(".field-error");e||(e=document.createElement("div"),e.className="field-error",s.appendChild(e)),e.textContent=t}}clearFieldError(e){const t=e.closest(".form-group");if(t){t.classList.remove("error");const e=t.querySelector(".field-error");e&&e.remove()}}setButtonLoading(e,t){const s=e.querySelector("span");t?(e.disabled=!0,e.classList.add("loading"),s&&(s.dataset.originalText=s.textContent,s.textContent="Sending...")):(e.disabled=!1,e.classList.remove("loading"),s&&s.dataset.originalText&&(s.textContent=s.dataset.originalText))}showNotification(e,t="info"){const s=document.createElement("div");s.className=`notification notification-${t}`,s.textContent=e,s.style.cssText=`\n            position: fixed;\n            top: 20px;\n            right: 20px;\n            padding: 1rem 1.5rem;\n            border-radius: 8px;\n            color: white;\n            font-weight: 500;\n            z-index: 10000;\n            transform: translateX(100%);\n            transition: transform 0.3s ease;\n            ${"success"===t?"background: #059669;":"background: #dc2626;"}\n        `,document.body.appendChild(s),setTimeout(()=>{s.style.transform="translateX(0)"},100),setTimeout(()=>{s.style.transform="translateX(100%)",setTimeout(()=>s.remove(),300)},5e3)}setupScrollEffects(){document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",t=>{t.preventDefault();const s=document.querySelector(e.getAttribute("href"));s&&s.scrollIntoView({behavior:"smooth",block:"start"})})})}setupKeyboardNavigation(){document.addEventListener("keydown",e=>{"Tab"===e.key&&document.body.classList.add("keyboard-navigation")}),document.addEventListener("mousedown",()=>{document.body.classList.remove("keyboard-navigation")})}}class PerformanceMonitor{constructor(){this.metrics={lcp:null,fid:null,cls:null,ttfb:null,fcp:null},this.thresholds={lcp:2500,fid:100,cls:.1,ttfb:800,fcp:1800},this.initPerformanceTracking()}initPerformanceTracking(){this.trackLCP(),this.trackFID(),this.trackCLS(),this.trackTTFB(),this.trackFCP(),this.trackResourceTiming(),window.addEventListener("load",()=>{setTimeout(()=>this.reportMetrics(),1e3)})}trackLCP(){"PerformanceObserver"in window&&new PerformanceObserver(e=>{const t=e.getEntries(),s=t[t.length-1];this.metrics.lcp=s.startTime,this.checkThreshold("lcp",s.startTime)}).observe({entryTypes:["largest-contentful-paint"]})}trackFID(){"PerformanceObserver"in window&&new PerformanceObserver(e=>{const t=e.getEntries()[0];if(t){const e=t.processingStart-t.startTime;this.metrics.fid=e,this.checkThreshold("fid",e)}}).observe({entryTypes:["first-input"]})}trackCLS(){if("PerformanceObserver"in window){let e=0;new PerformanceObserver(t=>{for(const s of t.getEntries())s.hadRecentInput||(e+=s.value);this.metrics.cls=e,this.checkThreshold("cls",e)}).observe({entryTypes:["layout-shift"]})}}trackTTFB(){"PerformanceObserver"in window&&new PerformanceObserver(e=>{const[t]=e.getEntries(),s=t.responseStart-t.requestStart;this.metrics.ttfb=s,this.checkThreshold("ttfb",s)}).observe({entryTypes:["navigation"]})}trackFCP(){"PerformanceObserver"in window&&new PerformanceObserver(e=>{const t=e.getEntries().find(e=>"first-contentful-paint"===e.name);t&&(this.metrics.fcp=t.startTime,this.checkThreshold("fcp",t.startTime))}).observe({entryTypes:["paint"]})}trackResourceTiming(){window.addEventListener("load",()=>{performance.getEntriesByType("resource").filter(e=>e.duration>1e3).length})}checkThreshold(e,t){this.thresholds[e]}reportMetrics(){const e=this.calculatePerformanceScore();"localhost"===window.location.hostname&&this.showPerformanceBadge(e)}showPerformanceBadge(e){const t=document.createElement("div");t.className="performance-badge",t.innerHTML=`⚡ ${e}/100`,e>=90?t.classList.add("good"):e>=70?t.classList.add("needs-improvement"):t.classList.add("poor"),t.addEventListener("click",()=>{}),t.title="Click to view detailed metrics",document.body.appendChild(t),setTimeout(()=>{t.parentElement&&(t.style.opacity="0",t.style.transition="opacity 0.5s ease",setTimeout(()=>t.remove(),500))},1e4)}calculatePerformanceScore(){let e=100;return this.metrics.lcp>this.thresholds.lcp&&(e-=20),this.metrics.fid>this.thresholds.fid&&(e-=15),this.metrics.cls>this.thresholds.cls&&(e-=15),this.metrics.ttfb>this.thresholds.ttfb&&(e-=10),this.metrics.fcp>this.thresholds.fcp&&(e-=10),Math.max(0,e)}}class ResourceManager{constructor(){this.criticalResources=new Set,this.deferredResources=new Set,this.loadedResources=new Set,this.initResourceManagement()}initResourceManagement(){this.preloadCriticalAssets(),this.setupLazyLoading(),this.optimizeImageLoading()}preloadCriticalAssets(){[{type:"font",href:"https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap",crossorigin:"anonymous"},{type:"image",href:"https://images.unsplash.com/photo-1486406146926-c627a92ad1ab?w=1920&h=1080&fit=crop&q=80"}].forEach(e=>this.preloadAsset(e))}preloadAsset(e){if(this.criticalResources.has(e.href))return;const t=document.createElement("link");t.rel="preload",t.as="font"===e.type?"style":e.type,t.href=e.href,e.crossorigin&&(t.crossOrigin=e.crossorigin),"font"===e.type&&(t.onload=()=>{const t=document.createElement("link");t.rel="stylesheet",t.href=e.href,document.head.appendChild(t)}),document.head.appendChild(t),this.criticalResources.add(e.href)}setupLazyLoading(){document.querySelectorAll('link[rel="preload"][as="style"]').forEach(e=>{e.addEventListener("load",()=>{e.rel="stylesheet"})})}optimizeImageLoading(){document.querySelectorAll("img").forEach((e,t)=>{t>2&&(e.loading="lazy",e.decoding="async")})}}class ImageOptimizer{constructor(){this.supportsWebP=this.checkWebPSupport(),this.supportsAVIF=this.checkAVIFSupport(),this.lazyImages=new Set,this.initImageOptimization()}checkWebPSupport(){const e=document.createElement("canvas");return e.width=1,e.height=1,e.toDataURL("image/webp").indexOf("webp")>-1}checkAVIFSupport(){const e=document.createElement("canvas");return e.width=1,e.height=1,e.toDataURL("image/avif").indexOf("avif")>-1}initImageOptimization(){this.setupIntersectionObserver(),this.optimizeExistingImages(),this.addImageErrorHandling()}setupIntersectionObserver(){"IntersectionObserver"in window&&(this.imageObserver=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(this.loadImage(e.target),this.imageObserver.unobserve(e.target))})},{rootMargin:"50px 0px",threshold:.01}))}optimizeExistingImages(){document.querySelectorAll('img[data-src], img[loading="lazy"]').forEach(e=>{e.dataset.src&&(this.lazyImages.add(e),this.imageObserver&&this.imageObserver.observe(e)),e.complete||(e.style.filter="blur(5px)",e.style.transition="filter 0.3s ease",e.addEventListener("load",()=>{e.style.filter="none"}))})}loadImage(e){if(e.dataset.src){const t=this.getOptimizedImageUrl(e.dataset.src),s=new Image;s.onload=()=>{e.src=t,e.classList.add("loaded"),e.style.filter="none"},s.onerror=()=>{e.src=e.dataset.src,e.classList.add("error")},s.src=t}}getOptimizedImageUrl(e){if(e.includes("unsplash.com")){const t=new URL(e);return this.supportsAVIF?t.searchParams.set("fm","avif"):this.supportsWebP&&t.searchParams.set("fm","webp"),t.searchParams.set("q","85"),t.toString()}return e}addImageErrorHandling(){document.addEventListener("error",e=>{"IMG"===e.target.tagName&&(e.target.classList.add("image-error"),e.target.dataset.retried||(e.target.dataset.retried="true",setTimeout(()=>{e.target.src=e.target.src},2e3)))},!0)}}const performanceMonitor=new PerformanceMonitor,resourceManager=new ResourceManager,imageOptimizer=new ImageOptimizer;function initWelcomeScreen(){const e=document.getElementById("welcome-screen");e&&(setTimeout(()=>{e.classList.add("hidden"),document.body.style.overflow="auto",setTimeout(()=>{document.body.classList.add("loaded")},300)},1200),document.body.style.overflow="hidden")}function initScrollEffects(){let e=!1;window.addEventListener("scroll",function(){e||(requestAnimationFrame(()=>{!function(){const e=window.innerHeight,t=document.documentElement.scrollHeight,s=window.pageYOffset/(t-e)*100;document.querySelectorAll(".scroll-progress").forEach(e=>{e.style.width=`${Math.min(100,Math.max(0,s))}%`})}(),function(){const e=window.pageYOffset;document.querySelectorAll(".parallax").forEach(t=>{const s=parseFloat(t.dataset.speed)||.5,r=-e*s;t.style.transform=`translateY(${r}px)`})}(),e=!1}),e=!0)},{passive:!0})}function initImageLazyLoading(){if("IntersectionObserver"in window){const e=new IntersectionObserver(t=>{t.forEach(t=>{if(t.isIntersecting){const s=t.target;s.dataset.src&&(s.src=s.dataset.src,s.classList.add("loaded"),e.unobserve(s))}})},{rootMargin:"50px 0px"});document.querySelectorAll("img[data-src]").forEach(t=>{e.observe(t)})}}function initAccessibilityFeatures(){const e=document.querySelector(".skip-to-content");e&&e.addEventListener("click",e=>{e.preventDefault();const t=document.querySelector("#main-content");t&&(t.focus(),t.scrollIntoView({behavior:"smooth"}))}),document.addEventListener("keydown",e=>{"Tab"===e.key&&document.body.classList.add("keyboard-navigation")}),document.addEventListener("mousedown",()=>{document.body.classList.remove("keyboard-navigation")});const t=document.createElement("div");t.setAttribute("aria-live","polite"),t.setAttribute("aria-atomic","true"),t.className="sr-only",document.body.appendChild(t),window.announceToScreenReader=e=>{t.textContent=e,setTimeout(()=>{t.textContent=""},1e3)}}function debounce(e,t){let s;return function(...r){clearTimeout(s),s=setTimeout(()=>{clearTimeout(s),e(...r)},t)}}function throttle(e,t){let s;return function(){const r=arguments,o=this;s||(e.apply(o,r),s=!0,setTimeout(()=>s=!1,t))}}function initWelcomeScreen(){const e=document.getElementById("welcome-screen");e&&(setTimeout(()=>{e.classList.add("hidden"),document.body.style.overflow="auto"},1500),document.body.style.overflow="hidden")}function initNavigation(){const e=document.getElementById("navbar"),t=document.getElementById("nav-toggle"),s=document.querySelector(".nav-menu"),r=document.querySelectorAll(".nav-link");t&&s&&t.addEventListener("click",()=>{s.classList.toggle("active"),t.classList.toggle("active"),s.classList.contains("active")?document.body.style.overflow="hidden":document.body.style.overflow="auto"}),r.forEach(e=>{e.addEventListener("click",r=>{r.preventDefault(),s&&(s.classList.remove("active"),t.classList.remove("active"),document.body.style.overflow="auto");const o=e.getAttribute("href"),n=document.querySelector(o);if(n){const e=n.offsetTop-80;window.scrollTo({top:e,behavior:"smooth"})}})}),window.addEventListener("scroll",()=>{e&&(window.scrollY>100?e.classList.add("scrolled"):e.classList.remove("scrolled")),updateActiveNavLink()})}function updateActiveNavLink(){const e=document.querySelectorAll("section[id]"),t=document.querySelectorAll(".nav-link");let s="";e.forEach(e=>{const t=e.offsetTop-150,r=e.offsetHeight;window.scrollY>=t&&window.scrollY<t+r&&(s=e.getAttribute("id"))}),t.forEach(e=>{e.classList.remove("active"),e.getAttribute("href")===`#${s}`&&e.classList.add("active")})}function initHero(){const e=document.querySelector(".hero-particles");window.addEventListener("scroll",()=>{const t=-.5*window.pageYOffset;e&&(e.style.transform=`translateY(${t}px)`)})}function initAnimations(){const e=new IntersectionObserver(t=>{t.forEach(t=>{t.isIntersecting&&(t.target.classList.add("scroll-reveal"),t.target.classList.contains("heading-animated")&&t.target.classList.add("in-view"),(t.target.classList.contains("achievement-item")||t.target.classList.contains("stat-card"))&&animateCounter(t.target),(t.target.classList.contains("stagger-children")||t.target.classList.contains("stagger-fast")||t.target.classList.contains("stagger-slow"))&&triggerStaggeredAnimation(t.target),e.unobserve(t.target))})},{threshold:.1,rootMargin:"0px 0px -50px 0px"});document.querySelectorAll("\n        .fade-in,\n        .slide-up,\n        .slide-down,\n        .slide-left,\n        .slide-right,\n        .scale-up,\n        .scale-down,\n        .service-card,\n        .project-card,\n        .testimonial-card,\n        .achievement-card,\n        .stat-card,\n        .contact-card,\n        .glass-card,\n        .heading-animated,\n        .stagger-children,\n        .stagger-fast,\n        .stagger-slow\n    ").forEach(t=>e.observe(t))}function triggerStaggeredAnimation(e){Array.from(e.children).forEach((e,t)=>{e.style.getPropertyValue("--stagger-index")||e.style.setProperty("--stagger-index",t),e.classList.contains("fade-in")||e.classList.contains("slide-up")||e.classList.contains("scale-up")||e.classList.add("fade-in")})}function initCounters(){}function animateCounter(e){const t=e.querySelector(".stat-number")||e.querySelector(".achievement-number")||e.querySelector("[data-target]");if(!t)return;let s;if(t.hasAttribute("data-target"))s=parseInt(t.getAttribute("data-target"));else{const e=t.textContent.match(/(\d+)/);if(!e)return;s=parseInt(e[1])}const r=s/125;let o=0;const n=t.textContent,i=n.match(/^[^\d]*/)?.[0]||"",a=n.match(/[^\d]*$/)?.[0]||"",c=()=>{o+=r,o<s?(t.textContent=i+Math.floor(o)+a,requestAnimationFrame(c)):t.textContent=i+s+a};c()}function initForms(){const e=document.getElementById("contact-form");if(e){e.querySelectorAll("input, select, textarea").forEach(e=>{e.addEventListener("blur",validateField),e.addEventListener("input",debounce(clearFieldError,300))}),e.addEventListener("submit",handleFormSubmit)}}function validateField(e){const t=e.target,s=t.value.trim(),r=t.name;clearFieldError(t);const o={name:{required:!0,minLength:2,maxLength:100,pattern:/^[a-zA-Z\s\.]+$/,message:"Name must be 2-100 characters and contain only letters, spaces, and dots"},email:{required:!0,pattern:/^\S+@\S+\.\S+$/,message:"Please enter a valid email address"},phone:{pattern:/^[\+]?[1-9][\d]{0,15}$/,message:"Please enter a valid phone number"},service:{required:!0,message:"Please select a service"},message:{required:!0,minLength:10,maxLength:2e3,message:"Message must be between 10 and 2000 characters"}}[r];if(o)return o.required&&!s?(showFieldError(t,`${r.charAt(0).toUpperCase()+r.slice(1)} is required`),!1):s&&o.pattern&&!o.pattern.test(s)||s&&o.minLength&&s.length<o.minLength?(showFieldError(t,o.message),!1):!(s&&o.maxLength&&s.length>o.maxLength)||(showFieldError(t,o.message),!1)}function clearFieldError(e){"object"==typeof e&&e.target&&(e=e.target);const t=e.closest(".form-group");if(t){t.classList.remove("error");const e=t.querySelector(".field-error");e&&e.remove()}}async function handleFormSubmit(e){e.preventDefault();const t=e.target,s=new FormData(t),r=t.querySelector('button[type="submit"]'),o=r.querySelector("span").textContent;if(r.classList.add("loading"),r.querySelector("span").textContent="Sending...",r.disabled=!0,clearFormErrors(t),!validateForm(t,s))return void resetSubmitButton(r,o);const n={name:s.get("name").trim(),email:s.get("email").trim(),phone:s.get("phone")?.trim()||"",company:s.get("company")?.trim()||"",service:s.get("service"),message:s.get("message").trim()};try{const e="localhost"===window.location.hostname?"http://localhost:3000":window.location.origin,s=await fetch(`${e}/api/contact`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}),r=await s.json();if(!r.success)throw new Error(r.message||"Failed to send message");showSuccessModal(),t.reset(),showSuccessMessage("Thank you! Your message has been sent successfully.")}catch(e){window.errorHandler?window.errorHandler.handleApiError(e,{form:t.id,formData:Object.fromEntries(s.entries()),timestamp:(new Date).toISOString()}):showErrorMessage("Failed to send message. Please try again or contact us directly.")}finally{resetSubmitButton(r,o)}}function validateForm(e,t){let s=!0;["name","email","service","message"].forEach(r=>{const o=t.get(r),n=e.querySelector(`[name="${r}"]`);o&&""!==o.trim()||(showFieldError(n,`${r.charAt(0).toUpperCase()+r.slice(1)} is required`),s=!1)});const r=t.get("email");if(r&&!isValidEmail(r)){showFieldError(e.querySelector('[name="email"]'),"Please enter a valid email address"),s=!1}return s}function isValidEmail(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}function showFieldError(e,t){const s=e.closest(".form-group");s.classList.add("error");const r=s.querySelector(".field-error");r&&r.remove();const o=document.createElement("div");o.className="field-error",o.textContent=t,o.style.cssText="\n        color: #fca5a5;\n        font-size: 0.875rem;\n        margin-top: 0.25rem;\n    ",s.appendChild(o)}function clearFormErrors(e){e.querySelectorAll(".form-group.error").forEach(e=>{e.classList.remove("error");const t=e.querySelector(".field-error");t&&t.remove()});e.querySelectorAll(".form-error").forEach(e=>e.remove())}function showErrorMessage(e){const t=document.createElement("div");t.className="form-error",t.textContent=e;const s=document.querySelector("form");s&&(s.insertBefore(t,s.firstChild),setTimeout(()=>{t.parentElement&&t.remove()},5e3))}function showSuccessMessage(e){const t=document.createElement("div");t.className="form-success",t.textContent=e,t.style.cssText="\n        background: #d1fae5;\n        border: 1px solid #a7f3d0;\n        color: #065f46;\n        padding: 1rem;\n        border-radius: 0.5rem;\n        margin-bottom: 1rem;\n    ";const s=document.querySelector("form");s&&(s.insertBefore(t,s.firstChild),setTimeout(()=>{t.parentElement&&t.remove()},5e3))}function resetSubmitButton(e,t){e.classList.remove("loading"),e.querySelector("span").textContent=t,e.disabled=!1}function initModal(){}function showSuccessModal(){const e=document.getElementById("success-modal");e&&(e.style.display="flex")}function closeModal(){const e=document.getElementById("success-modal");e&&(e.style.display="none")}function initScrollEffects(){}function optimizePageLoad(){document.querySelectorAll("img").forEach(e=>{e.loading||(e.loading="lazy"),e.decoding="async"}),"fonts"in document&&document.fonts.ready.then(()=>{document.body.classList.add("fonts-loaded")})}function debounce(e,t){let s;return function(...r){clearTimeout(s),s=setTimeout(()=>{clearTimeout(s),e(...r)},t)}}document.addEventListener("DOMContentLoaded",function(){const e=new AnimationController,t=new UIController,s=new PerformanceMonitor;initWelcomeScreen(),initScrollEffects(),initImageLazyLoading(),initAccessibilityFeatures(),window.mbConstruction={animationController:e,uiController:t,performanceMonitor:s}}),window.closeModal=function(){window.mbConstruction?.uiController&&window.mbConstruction.uiController.closeModal()},window.showModal=function(e){window.mbConstruction?.uiController&&window.mbConstruction.uiController.showModal(e)},window.closeModal=closeModal;